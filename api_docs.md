# AI 상담 챗봇 API 명세서

이 문서는 AI 상담 챗봇 API의 사용 방법을 설명합니다.

## 기본 정보

- 기본 URL: `http://localhost:8081`
- API 버전: `v1`
- 컨텐츠 타입: `application/json`

## API 엔드포인트

### 1. 채팅 API

일반적인 채팅 대화를 위한 API입니다.

**엔드포인트:** `/api/v1/chat`

**HTTP 메서드:** `POST`

**요청 파라미터:**

```json
{
  "text": "사용자 메시지",
  "max_length": 128,    // 선택적, 기본값: 128
  "temperature": 0.7,   // 선택적, 기본값: 0.7
  "top_p": 0.95         // 선택적, 기본값: 0.95
}
```

**응답:**

```json
{
  "reply": "AI 응답 메시지"
}
```

**예제:**

요청:
```json
{
  "text": "요즘 너무 우울하고 무기력해요.",
  "max_length": 200,
  "temperature": 0.1
}
```

응답:
```json
{
  "reply": "우울한 감정을 느끼는 것은 자연스러운 일입니다. 언제부터 이런 감정을 느끼기 시작하셨나요?"
}
```

### 2. 구조화된 상담 API

사용자의 하루 노트, 감정, 원하는 답변 모드에 따라 맞춤형 상담 응답을 제공합니다.

**엔드포인트:** `/api/v1/counseling`

**HTTP 메서드:** `POST`

**요청 파라미터:**

```json
{
  "daily_note": "하루 동안의 경험이나 감정을 기록한 노트",
  "emotion": "슬픔 또는 기쁨",  // "슬픔" 또는 "기쁨" 중 하나
  "response_mode": "감성적 또는 이성적", // "감성적" 또는 "이성적" 중 하나
  "max_length": 200  // 선택적, 기본값: 200
}
```

**응답:**

```json
{
  "reply": "AI 상담 응답 메시지",
  "summary": "응답에 대한 한 줄 요약"
}
```

**예제:**

요청:
```json
{
  "daily_note": "오늘 팀장님이 어떤 일 때문에 나한테 뭐라고 했어.",
  "emotion": "슬픔",
  "response_mode": "이성적"
}
```

응답:
```json
{
  "reply": "팀장님의 피드백이 있으셨군요. 이런 상황에서 슬픔을 느끼는 것은 자연스럽습니다. 하지만 이것을 성장의 기회로 삼을 수도 있습니다. 피드백의 내용을 객관적으로 분석하고, 개선할 점이 있다면 어떤 것인지 생각해보는 것이 도움이 될 수 있습니다.",
  "summary": "슬픔을 인정하면서도 이를 성장의 기회로 삼아 객관적으로 상황을 분석할 것을 제안합니다."
}
```

### 3. 헬스 체크 API

API 서버와 모델의 상태를 확인합니다.

**엔드포인트:** `/api/v1/health`

**HTTP 메서드:** `GET`

**응답:**

```json
{
  "status": "healthy",
  "model_loaded": true
}
```

## 레거시 엔드포인트

하위 호환성을 위해 다음 레거시 엔드포인트도 지원합니다:

- `/chat` - `/api/v1/chat`과 동일
- `/counseling` - `/api/v1/counseling`과 동일
- `/health` - `/api/v1/health`와 동일

## 에러 응답

요청이 실패한 경우, API는 HTTP 상태 코드와 함께 에러 메시지를 반환합니다:

```json
{
  "detail": "에러 메시지"
}
```

**일반적인 에러 코드:**

- `400 Bad Request` - 잘못된 요청 형식
- `500 Internal Server Error` - 서버 내부 오류
- `503 Service Unavailable` - 모델이 로드되지 않음

## 제한 사항

- 최대 요청 텍스트 길이: 제한 없음(실용적인 한도 내에서)
- 최대 응답 길이: 요청 시 `max_length` 파라미터로 지정
- 초당 최대 요청 수: 제한 없음(서버 성능에 따라 달라질 수 있음) 